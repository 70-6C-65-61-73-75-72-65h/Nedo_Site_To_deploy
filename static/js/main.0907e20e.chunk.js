(this.webpackJsonpgeosite=this.webpackJsonpgeosite||[]).push([[0],{145:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(16),r=n.n(c),i=(n(63),n(64),n(14)),u=n(12),l=n(31),s=n(33),m=n.n(s),p=n(4),f=n.n(p),d=n(8),g=n(7),_=n(57),O=Object(_.a)("keyval-store",1,{upgrade:function(e){e.createObjectStore("keyval")}}),E=function(e){return Object(d.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O;case 2:return t.abrupt("return",t.sent.get("keyval",e));case 3:case"end":return t.stop()}}),t)})))()},v=function(e,t){return Object(d.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O;case 2:return n.abrupt("return",n.sent.put("keyval",t,e));case 3:case"end":return n.stop()}}),n)})))()},b=function(){return Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O;case 2:return e.abrupt("return",e.sent.getAllKeys("keyval"));case 3:case"end":return e.stop()}}),e)})))()},S={locationStatus:null,latitude:null,longitude:null,mapMaxScale:14,isFetchingLocation:!1,osmBaseLink:"https://www.openstreetmap.org/",locations:[]},L=function(e){return{type:"SET_FETCHING_LOCATION",isFetchingLocation:e}},h=function(e){return{type:"SET_LOCATION_STATUS",locationStatus:e}},x=function(e){return{type:"SET_LOCATION_REQUESTS",locations:e}},w="Unable to retrieve your location",T="Locating\u2026",j="Successfully located",k=function(){var e=+new Date;return"location-".concat(e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FETCHING_LOCATION":return Object(g.a)(Object(g.a)({},e),{},{isFetchingLocation:t.isFetchingLocation});case"SET_LOCATION_STATUS":return Object(g.a)(Object(g.a)({},e),{},{locationStatus:t.locationStatus});case"SET_MY_LOCATION":return Object(g.a)(Object(g.a)({},e),{},{latitude:t.latitude,longitude:t.longitude});case"SET_MAP_LINK_SCALE":return Object(g.a)(Object(g.a)({},e),{},{mapMaxScale:t.mapMaxScale});case"SET_LOCATION_REQUESTS":return Object(g.a)(Object(g.a)({},e),{},{locations:t.locations.map((function(e){return e}))});default:return e}},M=n(53),N=n.n(M),C=n(150),A=n(151),I=n(148),F=n(152),G=function(e){var t=e.center,n=e.maxZoom,a=e.position;return o.a.createElement("div",null,o.a.createElement(C.a,{center:t,zoom:n,maxZoom:19,attributionControl:!0,zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,className:N.a.leaflet_container},o.a.createElement(A.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),o.a.createElement(I.a,{position:a},o.a.createElement(F.a,null,"\u041c\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u043c\u0441\u044f \u0437\u0434\u0435\u0441\u044c!"))))},P=Object(u.d)(Object(l.b)((function(e){return{latitude:e.geoLocation.latitude,longitude:e.geoLocation.longitude,mapMaxScale:e.geoLocation.mapMaxScale,osmBaseLink:e.geoLocation.osmBaseLink,locationStatus:e.geoLocation.locationStatus,isFetchingLocation:e.geoLocation.isFetchingLocation,locations:e.geoLocation.locations}}),{setMapMaxScale:function(e){return{type:"SET_MAP_LINK_SCALE",mapMaxScale:e}},getMyLocation:function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(L(!0)),t(h(T)),navigator.geolocation){e.next=5;break}return t(h(w)),e.abrupt("return",null);case 5:return e.prev=5,e.next=8,new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){t(e)}),{timeout:2e4,enableHighAccuracy:!0})}));case 8:return n=e.sent,t((a=n.coords.latitude,o=n.coords.longitude,{type:"SET_MY_LOCATION",latitude:a,longitude:o})),t(h(j)),e.next=13,v(k(),{latitude:n.coords.latitude,longitude:n.coords.longitude});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),t(h(e.t0.message));case 18:t(L(!1));case 19:case"end":return e.stop()}var a,o}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}()},getLocationRequests:function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L(!0)),e.next=4,b();case 4:return n=e.sent,a=n.filter((function(e){return 0===e.indexOf("location-")})),e.next=8,Promise.all(a.map(function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:o=e.sent,c=o.map((function(e){return"latitude:".concat(e.latitude,", longitude:").concat(e.longitude," ")})),t(x(c)),t(L(!1));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))((function(e){var t=e.locationStatus,n=(e.osmBaseLink,e.latitude),c=e.longitude,r=e.mapMaxScale,u=e.isFetchingLocation,l=e.getMyLocation,s=e.setMapMaxScale,p=e.locations,f=e.getLocationRequests,d=function(e,t){var n=Object(a.useState)(e),o=Object(i.a)(n,2),c=o[0],r=o[1];Object(a.useEffect)((function(){r(e)}),[e]);return[function(e){t(parseInt(e.currentTarget.value))},c]}(r,s),g=Object(i.a)(d,2),_=g[0],O=g[1];return o.a.createElement("div",{className:m.a.geolocation},t&&o.a.createElement("p",null," ",t," "),o.a.createElement("button",{className:m.a.find_me,onClick:l,disabled:u},"\u0418 \u0433\u0434\u0435 \u044f \u043d\u0430\u0445\u043e\u0436\u0443\u0441\u044f?"),t===j&&o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"\u041c\u043e\u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: ",function(e,t){return" \u0428\u0438\u0440\u043e\u043e\u0442\u0430: ".concat(e," \xb0, \u0414\u043e\u043b\u0433\u043e\u0442\u0430: ").concat(t," \xb0")}(n,c)," "),o.a.createElement("p",null,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0430: \u043f\u0440\u0438\u0431\u043b\u0438\u0436\u0435\u043d\u0438\u0435 \u0432 ",r," \u0440\u0430\u0437 "),o.a.createElement("div",{className:"slidecontainer"},o.a.createElement("input",{type:"range",min:"1",max:"19",value:O,className:m.a.slider,onChange:_})),o.a.createElement(G,{center:[n,c],maxZoom:r,position:[n,c]}),o.a.createElement("button",{onClick:f},"\u041c\u043e\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043b\u043e\u043a\u0430\u0446\u0438\u0438"),o.a.createElement("div",null,p.map((function(e){return o.a.createElement("div",null,e)})))))}));var B=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},"Geolocation"),o.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(149),R=n(54),Z=Object(u.c)({geoLocation:y,form:U.a}),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,H=Object(u.e)(Z,z(Object(u.a)(R.a)));window.__store__=H;var W=H;r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{store:W},o.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,n){e.exports={geolocation:"Geolocation_geolocation__2ApgH",find_me:"Geolocation_find_me__3XIWv",scaleMapLocation:"Geolocation_scaleMapLocation__j0MM3",slider:"Geolocation_slider__a2z06"}},53:function(e,t,n){e.exports={leaflet_container:"GeoMap_leaflet_container__1Px7q"}},58:function(e,t,n){e.exports=n(145)},63:function(e,t,n){},64:function(e,t,n){}},[[58,1,2]]]);
//# sourceMappingURL=main.0907e20e.chunk.js.map